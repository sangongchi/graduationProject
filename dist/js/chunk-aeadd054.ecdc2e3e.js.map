{"version":3,"sources":["webpack:///./src/views/workManager/UploadPage.vue?4370","webpack:///src/views/workManager/UploadPage.vue","webpack:///./src/views/workManager/UploadPage.vue?2d9a","webpack:///./src/views/workManager/UploadPage.vue","webpack:///./src/views/workManager/UploadPage.vue?87e6"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","submitRuler","uploadInfo","model","value","callback","$$v","$set","expression","_l","item","index","key","name","_s","classType","staticStyle","imgType","_e","on","beforeUpload","fileName","$event","deleteInfo","beforeUploadVideo","videoName","beforeUploadImg","imgName","submitHandler","staticRenderFns","data","Error","classList","fileDesrc","fileSrc","videoSrc","imgSrc","methods","$loading","show","formData","append","file","target","files","$post","$refs","validate","valid","params","userId","originalname","console","log","component"],"mappings":"gJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACN,EAAIO,GAAG,QAAQH,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,OAAO,CAACI,IAAI,aAAaC,MAAM,CAAC,iBAAiB,OAAO,cAAc,IAAI,MAAQT,EAAIU,YAAY,MAAQV,EAAIW,aAAa,CAACP,EAAG,MAAM,CAACA,EAAG,MAAM,CAACK,MAAM,CAAC,KAAO,OAAO,CAACL,EAAG,WAAW,CAACK,MAAM,CAAC,MAAQ,QAAQ,KAAO,aAAa,CAACL,EAAG,QAAQ,CAACQ,MAAM,CAACC,MAAOb,EAAIW,WAAmB,SAAEG,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIW,WAAY,WAAYI,IAAME,WAAW,0BAA0B,IAAI,IAAI,GAAGb,EAAG,MAAM,CAACA,EAAG,MAAM,CAACK,MAAM,CAAC,KAAO,OAAO,CAACL,EAAG,WAAW,CAACK,MAAM,CAAC,MAAQ,QAAQ,KAAO,cAAc,CAACL,EAAG,SAAS,CAACQ,MAAM,CAACC,MAAOb,EAAIW,WAAoB,UAAEG,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIW,WAAY,YAAaI,IAAME,WAAW,yBAAyBjB,EAAIkB,GAAIlB,EAAa,WAAE,SAASmB,EAAKC,GAAO,OAAOhB,EAAG,SAAS,CAACiB,IAAIF,EAAKG,KAAKF,EAAMX,MAAM,CAAC,MAAQU,EAAKN,QAAQ,CAACb,EAAIO,GAAGP,EAAIuB,GAAGJ,EAAKG,YAAW,IAAI,IAAI,IAAI,GAAGlB,EAAG,MAAM,CAACA,EAAG,MAAM,CAACK,MAAM,CAAC,KAAO,OAAO,CAACL,EAAG,WAAW,CAACK,MAAM,CAAC,MAAQ,QAAQ,KAAO,cAAc,CAACL,EAAG,QAAQ,CAACQ,MAAM,CAACC,MAAOb,EAAIW,WAAoB,UAAEG,SAAS,SAAUC,GAAMf,EAAIgB,KAAKhB,EAAIW,WAAY,YAAaI,IAAME,WAAW,2BAA2B,IAAI,IAAI,GAAgC,GAA5BjB,EAAIW,WAAWa,UAAgBpB,EAAG,MAAM,CAACA,EAAG,MAAM,CAACqB,YAAY,CAAC,gBAAgB,OAAO,cAAc,SAAShB,MAAM,CAAC,KAAO,OAAO,CAACL,EAAG,aAAa,CAACQ,MAAM,CAACC,MAAOb,EAAW,QAAEc,SAAS,SAAUC,GAAMf,EAAI0B,QAAQX,GAAKE,WAAW,YAAY,CAACb,EAAG,QAAQ,CAACK,MAAM,CAAC,MAAQ,UAAUL,EAAG,QAAQ,CAACK,MAAM,CAAC,MAAQ,SAASL,EAAG,QAAQ,CAACK,MAAM,CAAC,MAAQ,UAAU,IAAI,IAAI,GAAGT,EAAI2B,MAAM,GAAgC,IAA5B3B,EAAIW,WAAWa,UAAiBpB,EAAG,MAAM,CAA8B,GAA5BJ,EAAIW,WAAWa,WAA8C,GAA5BxB,EAAIW,WAAWa,UAAgBpB,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACN,EAAIO,GAAG,YAAYH,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,OAAO,CAACE,YAAY,YAAYmB,YAAY,CAAC,MAAQ,WAAWhB,MAAM,CAAC,KAAO,mBAAmB,KAAO,QAAQL,EAAG,QAAQ,CAACI,IAAI,aAAaF,YAAY,aAAaG,MAAM,CAAC,KAAO,QAAQmB,GAAG,CAAC,OAAS5B,EAAI6B,iBAAiB,GAAGzB,EAAG,MAAM,CAACE,YAAY,aAAa,CAACN,EAAIO,GAAGP,EAAIuB,GAAGvB,EAAI8B,WAA4B,IAAhB9B,EAAI8B,SAAgB1B,EAAG,SAAS,CAACK,MAAM,CAAC,KAAO,WAAWmB,GAAG,CAAC,MAAQ,SAASG,GAAQ,OAAO/B,EAAIgC,WAAW,WAAW,CAAChC,EAAIO,GAAG,QAAQP,EAAI2B,MAAM,KAAK3B,EAAI2B,KAAkC,GAA5B3B,EAAIW,WAAWa,UAAgBpB,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACN,EAAIO,GAAG,cAAcH,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,OAAO,CAACE,YAAY,YAAYmB,YAAY,CAAC,MAAQ,WAAWhB,MAAM,CAAC,KAAO,mBAAmB,KAAO,QAAQL,EAAG,QAAQ,CAACI,IAAI,cAAcF,YAAY,aAAaG,MAAM,CAAC,KAAO,QAAQmB,GAAG,CAAC,OAAS5B,EAAIiC,sBAAsB,GAAG7B,EAAG,MAAM,CAACE,YAAY,aAAa,CAACN,EAAIO,GAAGP,EAAIuB,GAAGvB,EAAIkC,WAAW,KAAuB,IAAjBlC,EAAIkC,UAAiB9B,EAAG,SAAS,CAACK,MAAM,CAAC,KAAO,WAAWmB,GAAG,CAAC,MAAQ,SAASG,GAAQ,OAAO/B,EAAIgC,WAAW,YAAY,CAAChC,EAAIO,GAAG,QAAQP,EAAI2B,MAAM,KAAK3B,EAAI2B,KAAkC,GAA5B3B,EAAIW,WAAWa,UAAgBpB,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACN,EAAIO,GAAGP,EAAIuB,GAA+B,GAA5BvB,EAAIW,WAAWa,UAAiB,UAAY,aAAapB,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,OAAO,CAACE,YAAY,YAAYmB,YAAY,CAAC,MAAQ,WAAWhB,MAAM,CAAC,KAAO,mBAAmB,KAAO,QAAQL,EAAG,QAAQ,CAACI,IAAI,YAAYF,YAAY,aAAaG,MAAM,CAAC,KAAO,QAAQmB,GAAG,CAAC,OAAS5B,EAAImC,oBAAoB,GAAG/B,EAAG,MAAM,CAACE,YAAY,aAAa,CAACN,EAAIO,GAAGP,EAAIuB,GAAGvB,EAAIoC,UAA0B,IAAfpC,EAAIoC,QAAehC,EAAG,SAAS,CAACK,MAAM,CAAC,KAAO,WAAWmB,GAAG,CAAC,MAAQ,SAASG,GAAQ,OAAO/B,EAAIgC,WAAW,UAAU,CAAChC,EAAIO,GAAG,QAAQP,EAAI2B,MAAM,KAAK3B,EAAI2B,OAAO3B,EAAI2B,KAAKvB,EAAG,SAAS,CAACE,YAAY,YAAYG,MAAM,CAAC,KAAO,WAAWmB,GAAG,CAAC,MAAQ5B,EAAIqC,gBAAgB,CAACrC,EAAIO,GAAG,SAAS,QAClwH+B,EAAkB,GCsEtB,GACEhB,KAAM,aACNiB,KAFF,WAGI,IAAJ,kBACoB,KAAV1B,EACFC,IAEAA,EAAS,IAAI0B,MAAM,aAGvB,MAAO,CACLd,QAAS,GACTe,UAAW,CACjB,CACQ,KAAR,MACQ,MAAR,GAEA,CACQ,KAAR,KACQ,MAAR,GAEA,CACQ,KAAR,KACQ,MAAR,IAGM9B,WAAY,CACVa,UAAW,GACXM,SAAU,GACVY,UAAW,GACXC,QAAS,IAEXjC,YAAa,CACXoB,SAAU,CAAC,CAAnB,yCACQN,UAAW,CACnB,CACU,UAAV,EACU,QAAV,UACU,QAAV,SACU,KAAV,WAGQkB,UAAW,CAAC,CAApB,kDAEMC,QAAS,GACTb,SAAU,GACVc,SAAU,GACVV,UAAW,GACXW,OAAQ,GACRT,QAAS,KAGbU,QAAS,CACPd,WADJ,SACA,GACkB,OAARO,GACFtC,KAAKmC,QAAU,GACfnC,KAAK4C,OAAS,IACtB,WACQ5C,KAAK6B,SAAW,GAChB7B,KAAK0C,QAAU,IACvB,aACQ1C,KAAKiC,UAAY,GACjBjC,KAAK2C,SAAW,KAOpBf,aAjBJ,SAiBA,cACM5B,KAAK8C,SAASC,OACd,IAAN,eACMC,EAASC,OAAO,OAAQC,EAAKC,OAAOC,MAAM,IAC1CpD,KAAKqD,MAAM,eAAgBL,GACjC,kBACQ,EAAR,gBACQ,EAAR,cACQ,EAAR,2BAEA,mBACQ,QAAR,WAGIhB,kBA/BJ,SA+BA,cACMhC,KAAKsD,MAAM,cAAcC,UAAS,SAAxC,GACQ,GAAIC,EAAO,CACT,EAAV,gBACU,IAAV,eACUR,EAASC,OAAO,OAAQC,EAAKC,OAAOC,MAAM,IAC1C,EAAV,yBACA,kBACY,EAAZ,gBACY,EAAZ,eACY,EAAZ,4BAEA,mBACY,QAAZ,eAGU,EAAV,+BAIIlB,gBAnDJ,SAmDA,cACA,eACMc,EAASC,OAAO,OAAQC,EAAKC,OAAOC,MAAM,IAC1CpD,KAAKqD,MAAM,cAAeL,GAChC,kBACQ,EAAR,aACQ,EAAR,0BAEA,mBACQ,QAAR,WAGIZ,cA/DJ,WA+DA,WACA,kBACMqB,EAAOC,OAAS,SAChBD,EAAOf,QAAU1C,KAAK0C,QACtBe,EAAOb,OAAS5C,KAAK4C,OACrBa,EAAOE,aAAe3D,KAAK6B,SACM,GAA7B7B,KAAKU,WAAWa,WAClBkC,EAAOf,QAAU1C,KAAK2C,SACtBc,EAAOE,aAAe3D,KAAKiC,WACnC,+BACQwB,EAAOE,aAAe3D,KAAKmC,QAC3BsB,EAAOf,QAAU1C,KAAK4C,OACF,QAAhB5C,KAAKyB,QACPgC,EAAOhC,QAAU,EAC3B,oBACUgC,EAAOhC,QAAU,EAEjBgC,EAAOhC,QAAU,GAGrBmC,QAAQC,IAAIJ,GACZzD,KAAKsD,MAAM,cAAcC,UAAS,SAAxC,GACYC,EACZ,GAAc,EAAd,oCACY,EAAZ,0BACA,2CACY,EAAZ,0BACA,cACY,EAAZ,wBAEY,EAAZ,0BACA,kBACc,EAAd,8BAEA,mBACc,EAAd,2BAIU,EAAV,+BCjOmW,I,wBCQ/VM,EAAY,eACd,EACAhE,EACAuC,GACA,EACA,KACA,KACA,MAIa,aAAAyB,E,2CCnBf,yBAAoiB,EAAG","file":"js/chunk-aeadd054.ecdc2e3e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"out-container\"},[_c('div',{staticClass:\"upload-container\"},[_c('div',{staticClass:\"top-categery\"},[_vm._v(\"上传\")]),_c('div',{staticClass:\"main-content\"},[_c('Form',{ref:\"submitForm\",attrs:{\"label-position\":\"left\",\"label-width\":100,\"rules\":_vm.submitRuler,\"model\":_vm.uploadInfo}},[_c('Row',[_c('Col',{attrs:{\"span\":\"24\"}},[_c('FormItem',{attrs:{\"label\":\"文件名称:\",\"prop\":\"fileName\"}},[_c('Input',{model:{value:(_vm.uploadInfo.fileName),callback:function ($$v) {_vm.$set(_vm.uploadInfo, \"fileName\", $$v)},expression:\"uploadInfo.fileName\"}})],1)],1)],1),_c('Row',[_c('Col',{attrs:{\"span\":\"24\"}},[_c('FormItem',{attrs:{\"label\":\"文件分类:\",\"prop\":\"classType\"}},[_c('Select',{model:{value:(_vm.uploadInfo.classType),callback:function ($$v) {_vm.$set(_vm.uploadInfo, \"classType\", $$v)},expression:\"uploadInfo.classType\"}},_vm._l((_vm.classList),function(item,index){return _c('Option',{key:item.name+index,attrs:{\"value\":item.value}},[_vm._v(_vm._s(item.name))])}),1)],1)],1)],1),_c('Row',[_c('Col',{attrs:{\"span\":\"24\"}},[_c('FormItem',{attrs:{\"label\":\"文件描述:\",\"prop\":\"fileDesrc\"}},[_c('Input',{model:{value:(_vm.uploadInfo.fileDesrc),callback:function ($$v) {_vm.$set(_vm.uploadInfo, \"fileDesrc\", $$v)},expression:\"uploadInfo.fileDesrc\"}})],1)],1)],1),(_vm.uploadInfo.classType == 2)?_c('Row',[_c('Col',{staticStyle:{\"margin-bottom\":\"20px\",\"margin-left\":\"100px\"},attrs:{\"span\":\"24\"}},[_c('RadioGroup',{model:{value:(_vm.imgType),callback:function ($$v) {_vm.imgType=$$v},expression:\"imgType\"}},[_c('Radio',{attrs:{\"label\":\"精选图片\"}}),_c('Radio',{attrs:{\"label\":\"设计图\"}}),_c('Radio',{attrs:{\"label\":\"摄影图\"}})],1)],1)],1):_vm._e()],1),(_vm.uploadInfo.classType != '')?_c('div',[(_vm.uploadInfo.classType != 2 && _vm.uploadInfo.classType != 3)?_c('div',{staticClass:\"upload-box\"},[_c('div',{staticClass:\"upload-title\"},[_vm._v(\"上传源文件：\")]),_c('div',{staticClass:\"z-upload\"},[_c('Icon',{staticClass:\"inputIcon\",staticStyle:{\"color\":\"#3399ff\"},attrs:{\"type\":\"ios-cloud-upload\",\"size\":\"52\"}}),_c('input',{ref:\"uploadFile\",staticClass:\"inputStyle\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.beforeUpload}})],1),_c('div',{staticClass:\"uploadBtn\"},[_vm._v(_vm._s(_vm.fileName)),(_vm.fileName != '')?_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.deleteInfo('file')}}},[_vm._v(\"删除\")]):_vm._e()],1)]):_vm._e(),(_vm.uploadInfo.classType == 3)?_c('div',{staticClass:\"upload-box\"},[_c('div',{staticClass:\"upload-title\"},[_vm._v(\"上传视频源文件：\")]),_c('div',{staticClass:\"z-upload\"},[_c('Icon',{staticClass:\"inputIcon\",staticStyle:{\"color\":\"#3399ff\"},attrs:{\"type\":\"ios-cloud-upload\",\"size\":\"52\"}}),_c('input',{ref:\"uploadVideo\",staticClass:\"inputStyle\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.beforeUploadVideo}})],1),_c('div',{staticClass:\"uploadBtn\"},[_vm._v(_vm._s(_vm.videoName)+\" \"),(_vm.videoName != '')?_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.deleteInfo('video')}}},[_vm._v(\"删除\")]):_vm._e()],1)]):_vm._e(),(_vm.uploadInfo.classType == 2)?_c('div',{staticClass:\"upload-box\"},[_c('div',{staticClass:\"upload-title\"},[_vm._v(_vm._s(_vm.uploadInfo.classType == 2 ? '上传图片文件：' : '上传封面图：'))]),_c('div',{staticClass:\"z-upload\"},[_c('Icon',{staticClass:\"inputIcon\",staticStyle:{\"color\":\"#3399ff\"},attrs:{\"type\":\"ios-cloud-upload\",\"size\":\"52\"}}),_c('input',{ref:\"uploadImg\",staticClass:\"inputStyle\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.beforeUploadImg}})],1),_c('div',{staticClass:\"uploadBtn\"},[_vm._v(_vm._s(_vm.imgName)),(_vm.imgName != '')?_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.deleteInfo('img')}}},[_vm._v(\"删除\")]):_vm._e()],1)]):_vm._e()]):_vm._e(),_c('Button',{staticClass:\"submitBtn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitHandler}},[_vm._v(\"提交\")])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"out-container\">\r\n    <div class=\"upload-container\">\r\n      <div class=\"top-categery\">上传</div>\r\n      <div class=\"main-content\">\r\n        <Form label-position=\"left\" :label-width=\"100\" :rules=\"submitRuler\" ref=\"submitForm\" :model=\"uploadInfo\">\r\n          <Row>\r\n            <Col span=\"24\">\r\n              <FormItem label=\"文件名称:\" prop=\"fileName\">\r\n                <Input v-model=\"uploadInfo.fileName\"></Input>\r\n              </FormItem>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col span=\"24\">\r\n              <FormItem label=\"文件分类:\" prop=\"classType\">\r\n                <Select v-model=\"uploadInfo.classType\">\r\n                  <Option v-for=\"(item,index) in classList\" :value=\"item.value\" :key=\"item.name+index\">{{ item.name }}</Option>\r\n                </Select>\r\n              </FormItem>\r\n            </Col>\r\n          </Row>\r\n          <Row>\r\n            <Col span=\"24\">\r\n              <FormItem label=\"文件描述:\" prop=\"fileDesrc\">\r\n                <Input v-model=\"uploadInfo.fileDesrc\"></Input>\r\n              </FormItem>\r\n            </Col>\r\n          </Row>\r\n          <Row v-if=\"uploadInfo.classType == 2\">\r\n            <Col span=\"24\" style=\"margin-bottom:20px;margin-left:100px\">\r\n              <RadioGroup v-model=\"imgType\">\r\n                <Radio label=\"精选图片\"></Radio>\r\n                <Radio label=\"设计图\"></Radio>\r\n                <Radio label=\"摄影图\"></Radio>\r\n              </RadioGroup>\r\n            </Col>\r\n          </Row>\r\n        </Form>\r\n        <div v-if=\"uploadInfo.classType != ''\">\r\n          <div class=\"upload-box\" v-if=\"uploadInfo.classType != 2 && uploadInfo.classType != 3\">\r\n            <div class=\"upload-title\">上传源文件：</div>\r\n            <div class=\"z-upload\">\r\n              <Icon type=\"ios-cloud-upload\" class=\"inputIcon\" size=\"52\" style=\"color: #3399ff\"></Icon>\r\n              <input type=\"file\" ref=\"uploadFile\" class=\"inputStyle\" @change=\"beforeUpload\" />\r\n            </div>\r\n            <div class=\"uploadBtn\">{{ fileName }}<Button type=\"primary\" v-if=\"fileName != ''\" @click=\"deleteInfo('file')\">删除</Button></div>\r\n          </div>\r\n          <div class=\"upload-box\" v-if=\"uploadInfo.classType == 3\">\r\n            <div class=\"upload-title\">上传视频源文件：</div>\r\n            <div class=\"z-upload\">\r\n              <Icon type=\"ios-cloud-upload\" class=\"inputIcon\" size=\"52\" style=\"color: #3399ff\"></Icon>\r\n              <input type=\"file\" ref=\"uploadVideo\" class=\"inputStyle\" @change=\"beforeUploadVideo\" />\r\n            </div>\r\n            <div class=\"uploadBtn\">{{ videoName }} <Button type=\"primary\" v-if=\"videoName != ''\" @click=\"deleteInfo('video')\">删除</Button></div>\r\n          </div>\r\n          <div class=\"upload-box\" v-if=\"uploadInfo.classType == 2\">\r\n            <div class=\"upload-title\">{{ uploadInfo.classType == 2 ? '上传图片文件：' : '上传封面图：' }}</div>\r\n            <div class=\"z-upload\">\r\n              <Icon type=\"ios-cloud-upload\" class=\"inputIcon\" size=\"52\" style=\"color: #3399ff\"></Icon>\r\n              <input type=\"file\" ref=\"uploadImg\" class=\"inputStyle\" @change=\"beforeUploadImg\" />\r\n            </div>\r\n            <div class=\"uploadBtn\">{{ imgName }}<Button type=\"primary\" v-if=\"imgName != ''\" @click=\"deleteInfo('img')\">删除</Button></div>\r\n          </div>\r\n        </div>\r\n        <Button class=\"submitBtn\" type=\"primary\" @click=\"submitHandler\">提交</Button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: 'UploadFile',\r\n  data() {\r\n    const fileNameCheck = (rule, value, callback) => {\r\n      if (value !== '') {\r\n        callback();\r\n      } else {\r\n        callback(new Error('请输入文件名称'));\r\n      }\r\n    };\r\n    return {\r\n      imgType: '',\r\n      classList: [\r\n        {\r\n          name: '源文件',\r\n          value: 1,\r\n        },\r\n        {\r\n          name: '图片',\r\n          value: 2,\r\n        },\r\n        {\r\n          name: '视频',\r\n          value: 3,\r\n        },\r\n      ],\r\n      uploadInfo: {\r\n        classType: '',\r\n        fileName: '',\r\n        fileDesrc: '',\r\n        fileSrc: '',\r\n      },\r\n      submitRuler: {\r\n        fileName: [{ required: true, validator: fileNameCheck, trigger: 'blur' }],\r\n        classType: [\r\n          {\r\n            required: true,\r\n            message: '请选择文件类型',\r\n            trigger: 'change',\r\n            type: 'number',\r\n          },\r\n        ],\r\n        fileDesrc: [{ required: true, message: '请输入文件描述信息', trigger: 'blur' }],\r\n      },\r\n      fileSrc: '',\r\n      fileName: '',\r\n      videoSrc: '',\r\n      videoName: '',\r\n      imgSrc: '',\r\n      imgName: '',\r\n    };\r\n  },\r\n  methods: {\r\n    deleteInfo(data) {\r\n      if (data == 'img') {\r\n        this.imgName = '';\r\n        this.imgSrc = '';\r\n      } else if (data == 'file') {\r\n        this.fileName = '';\r\n        this.fileSrc = '';\r\n      } else if (data == 'video') {\r\n        this.videoName = '';\r\n        this.videoSrc = '';\r\n      }\r\n    },\r\n    /**\r\n     * @method beforeUpload\r\n     * @description 使用input上传，文件改变时拦截文件并上传\r\n     */\r\n    beforeUpload(file) {\r\n      this.$loading.show();\r\n      let formData = new FormData();\r\n      formData.append('file', file.target.files[0]);\r\n      this.$post('/upload/file', formData)\r\n        .then((res) => {\r\n          this.$loading.hide();\r\n          this.fileSrc = res.url;\r\n          this.fileName = res.originalname;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    beforeUploadVideo(file) {\r\n      this.$refs['submitForm'].validate((valid) => {\r\n        if (valid) {\r\n          this.$loading.show();\r\n          let formData = new FormData();\r\n          formData.append('file', file.target.files[0]);\r\n          this.$post('/upload/video', formData)\r\n            .then((res) => {\r\n              this.$loading.hide();\r\n              this.videoSrc = res.url;\r\n              this.videoName = res.originalname;\r\n            })\r\n            .catch((err) => {\r\n              console.log(err);\r\n            });\r\n        } else {\r\n          this.$Message.error('请填写所有必填项');\r\n        }\r\n      });\r\n    },\r\n    beforeUploadImg(file) {\r\n      let formData = new FormData();\r\n      formData.append('file', file.target.files[0]);\r\n      this.$post('/upload/img', formData)\r\n        .then((res) => {\r\n          this.imgSrc = res.url;\r\n          this.imgName = res.originalname;\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n    },\r\n    submitHandler() {\r\n      let params = this.uploadInfo;\r\n      params.userId = '123456';\r\n      params.fileSrc = this.fileSrc;\r\n      params.imgSrc = this.imgSrc;\r\n      params.originalname = this.fileName;\r\n      if (this.uploadInfo.classType == 3) {\r\n        params.fileSrc = this.videoSrc;\r\n        params.originalname = this.videoName;\r\n      } else if (this.uploadInfo.classType == 2) {\r\n        params.originalname = this.imgName;\r\n        params.fileSrc = this.imgSrc;\r\n        if (this.imgType == '精选图片') {\r\n          params.imgType = 0;\r\n        } else if (this.imgType == '设计图') {\r\n          params.imgType = 1;\r\n        } else {\r\n          params.imgType = 2;\r\n        }\r\n      }\r\n      console.log(params);\r\n      this.$refs['submitForm'].validate((valid) => {\r\n        if (valid) {\r\n          if (this.uploadInfo.classType == 2 && this.imgName == '') {\r\n            this.$Message.error('请上传图片文件');\r\n          } else if (this.uploadInfo.classType == 3 && this.videoName == '') {\r\n            this.$Message.error('请上传视频文件');\r\n          } else if (params.fileSrc == '') {\r\n            this.$Message.error('请上传文件');\r\n          } else {\r\n            this.$post('/upload/upfile', params)\r\n              .then((res) => {\r\n                this.$Message.success('文件上传成功');\r\n              })\r\n              .catch((err) => {\r\n                this.$Message.error('服务器异常');\r\n              });\r\n          }\r\n        } else {\r\n          this.$Message.error('请按要求上传');\r\n        }\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n.out-container {\r\n  width: 100%;\r\n  background: rgba(240, 242, 245, 1);\r\n  font-family: PingFangSC-Regular, PingFang SC;\r\n  font-size: 14px;\r\n  .upload-container {\r\n    margin: 0 auto;\r\n    width: 100%;\r\n    background: rgba(255, 255, 255, 1);\r\n    border-radius: 4px;\r\n    overflow: hidden;\r\n    .top-categery {\r\n      width: 100%;\r\n      height: 56px;\r\n      border-bottom: 1px solid #00000021;\r\n      line-height: 56px;\r\n      font-size: 24px;\r\n      text-align: center;\r\n    }\r\n    .main-content {\r\n      width: 500px;\r\n      margin: 45px auto;\r\n      position: relative;\r\n      .upload-box {\r\n        width: 70%;\r\n        position: relative;\r\n        .upload-title {\r\n          margin-bottom: 13px;\r\n        }\r\n        .tips {\r\n          font-size: 12px;\r\n          font-family: PingFangSC-Regular, PingFang SC;\r\n          color: rgba(154, 154, 154, 1);\r\n          line-height: 17px;\r\n        }\r\n        .uploadBtn {\r\n          line-height: 30px;\r\n          margin: 10px 0;\r\n          .ivu-btn {\r\n            float: right;\r\n          }\r\n        }\r\n      }\r\n      .submitBtn {\r\n        position: absolute;\r\n        left: 50%;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UploadPage.vue?vue&type=template&id=568cbf51&\"\nimport script from \"./UploadPage.vue?vue&type=script&lang=js&\"\nexport * from \"./UploadPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./UploadPage.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadPage.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UploadPage.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}